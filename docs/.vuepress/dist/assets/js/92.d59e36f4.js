(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{1026:function(a,e,n){"use strict";n.r(e);var t=n(73),r=Object(t.a)({},(function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h2",{attrs:{id:"rabbitmq"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq"}},[a._v("#")]),a._v(" rabbitmq")]),a._v(" "),n("h3",{attrs:{id:"image"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#image"}},[a._v("#")]),a._v(" image")]),a._v(" "),n("p",[a._v("直接部署时间较长，建议先拉去image。")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("docker pull rabbitmq\n")])])]),n("h3",{attrs:{id:"configmap-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configmap-yml"}},[a._v("#")]),a._v(" configmap.yml")]),a._v(" "),n("p",[a._v("执行命令")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('kubectl create cm rabbit-plugins --from-literal=enabled_plugins="[rabbitmq_shovel,rabbitmq_shovel_management]."\n\n')])])]),n("h3",{attrs:{id:"deployment-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#deployment-yml"}},[a._v("#")]),a._v(" deployment.yml")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app: rabbitmq\n  name: rabbitmq\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: rabbitmq\n  template:\n    metadata:\n      labels:\n        app: rabbitmq\n    spec:\n      containers:\n        - env:\n            - name: RABBITMQ_DEFAULT_USER\n              value: "root"\n            - name: RABBITMQ_DEFAULT_PASS\n              value: "123ADD123ADD"\n            - name: TZ\n              value: Asia/Shanghai\n          image: rabbitmq:latest\n          imagePullPolicy: IfNotPresent\n          name: rabbitmq\n          ports:\n            - containerPort: 15672\n              name: manager\n            - containerPort: 5672\n              name: broker\n          volumeMounts:\n            - mountPath: /etc/rabbitmq/enabled_plugins\n              name: configfile\n              subPath: enabled_plugins\n      volumes:\n        - name: configfile\n          configMap:\n            name: rabbit-plugins\n            items:\n              - key: enabled_plugins\n                path: enabled_plugins\n')])])]),n("h3",{attrs:{id:"service-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#service-yml"}},[a._v("#")]),a._v(" service.yml")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("apiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    app: rabbitmq\n  name: rabbitmq\nspec:\n  type: LoadBalancer\n  ports:\n    - name: broker\n      port: 5179    # 5672转发到 5179  客户端链接\n      protocol: TCP\n      targetPort: 5672\n    - name: manangement\n      port: 15672\n      protocol: TCP\n      targetPort: 15672   # web端\n  selector:\n    app: rabbitmq\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);